webpackJsonp([2],{RMMI:function(t,e){},jpyp:function(t,e){},x98A:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),o=s("exGp"),r=s.n(o),i=s("QmSG"),c=s("mtWM"),l=s.n(c),u={props:["msg"],methods:{deleteMsg:function(){var t=this;return r()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("msg",t.msg.id),e.next=3,l()({url:i.a.host+"/wx/deleteMsg",method:"post",data:{id:t.msg.id}}).then(function(t){console.log("res",t),window.location.reload()});case 3:case"end":return e.stop()}},e,t)}))()}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"book-card"},[s("div",{staticClass:"table",attrs:{width:"98%"}},[s("div",{staticClass:"tr"},[s("div",{staticClass:"date"},[t._v(t._s(t.msg.keyword))]),t._v(" "),s("div",{staticClass:"busi"},[s("label",[t._v(t._s(t.msg.context))])]),t._v(" "),s("div",{staticClass:"btns"},[s("button",{staticClass:"btn",on:{click:t.deleteMsg}},[s("label",[t._v("删除")])])])])])])},staticRenderFns:[]};var v={name:"Msg",components:{RecordList:s("VU/8")(u,p,!1,function(t){s("jpyp")},"data-v-5274915a",null).exports},data:function(){return{keyword:"",context:"",as_type:0,types:["关键词回复","关注回复","自动回复"],key_type:0,key_types:["半匹配","全匹配"],context_type:0,context_types:["文字","图文"],msgs:[]}},methods:{changeType:function(t){this.as_type=parseInt(t.target.value),console.log("as_type",this.as_type),this.getMsg()},changeKeyType:function(t){this.key_type=parseInt(t.target.value),console.log("key_type",this.key_type)},changeContextType:function(t){this.context_type=parseInt(t.target.value),console.log("context_type",this.context_type)},submit:function(){var t=this;return r()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.context.length>0)){e.next=5;break}return e.next=3,l()({url:i.a.host+"/wx/sendMsg",method:"post",data:{as_type:t.as_type,keyword:t.keyword,context:t.context,key_type:t.key_type,context_type:t.context_type}}).then(function(t){console.log("res",t)});case 3:e.next=6;break;case 5:console.log("没有填写");case 6:case"end":return e.stop()}},e,t)}))()},getMsg:function(){var t=this;return r()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({url:i.a.host+"/wx/getMsg",method:"get",params:{as_type:t.as_type}}).then(function(e){"200"==e.data.state&&(t.msgs=e.data.msgs),console.log("this.msgs",t.msgs)});case 2:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getMsg()}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"brokers"},[s("div",{staticClass:"header"},[t._v("\n    消息设置\n  ")]),t._v(" "),s("div",{staticClass:"context"},[0==t.as_type?s("div",{staticClass:"row2"},[s("span",[t._v("关键词：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"input",attrs:{"active-color":"#ff7700","inactive-color":"#dcdfe7"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("span",[t._v("内容：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.context,expression:"context"}],staticClass:"text",attrs:{"active-color":"#ff7700","inactive-color":"#dcdfe7"},domProps:{value:t.context},on:{input:function(e){e.target.composing||(t.context=e.target.value)}}})]),t._v(" "),0==t.as_type?s("div",{staticClass:"row2"},[s("span",[t._v("关键词类型：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.key_type,expression:"key_type"}],staticClass:"text",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.key_type=e.target.multiple?s:s[0]},function(e){return t.changeKeyType(e)}]}},t._l(t.key_types,function(e,n){return s("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}),0)]):t._e(),t._v(" "),0==t.as_type?s("div",{staticClass:"row2"},[s("span",[t._v("内容类型：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.context_type,expression:"context_type"}],staticClass:"text",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.context_type=e.target.multiple?s:s[0]},function(e){return t.changeContextType(e)}]}},t._l(t.context_types,function(e,n){return s("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}),0)]):t._e(),t._v(" "),s("div",{staticClass:"row2"},[s("span",[t._v("消息类型：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.as_type,expression:"as_type"}],staticClass:"text",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.as_type=e.target.multiple?s:s[0]},function(e){return t.changeType(e)}]}},t._l(t.types,function(e,n){return s("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}),0)]),t._v(" "),s("div",{staticClass:"btnConfirm",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),s("div",[s("div",{staticClass:"table th"},[0==t.as_type?s("div",{staticClass:"date"},[t._v("关键词")]):t._e(),t._v(" "),s("div",{staticClass:"busi"},[t._v("内容")]),t._v(" "),s("div",{staticClass:"date"},[t._v("操作")])]),t._v(" "),s("div",t._l(t.msgs,function(t,e){return s("RecordList",{key:e,attrs:{msg:t}})}),1)])])},staticRenderFns:[]};var _=s("VU/8")(v,d,!1,function(t){s("RMMI")},"data-v-2f8d78ce",null);e.default=_.exports}});