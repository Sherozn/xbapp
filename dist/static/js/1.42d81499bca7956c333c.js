webpackJsonp([1],{BugC:function(t,e){},H9e0:function(t,e){},I1a8:function(t,e){},aJgs:function(t,e){},pMgH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),o=s("exGp"),l=s.n(o),r=s("mtWM"),n=s.n(r),d=s("QmSG"),c=s("ybdy"),u={data:function(){return{name:"",note:"",price:"",buyUrl:"",testUrl:"",as_type:1,as_type_name:"重疾险",ins_types:["重疾险","寿险","医疗险","意外险","年金险","旅行意外险","家财险"],fileList:[],error:"",user_id:0}},methods:{Cancel:function(){this.$emit("ifAdd",0)},changeType:function(t){this.as_type=parseInt(t.target.value)+1,console.log("as_type",this.as_type)},submitUpload:function(){if(this.name&&this.name.length<20&&this.note&&this.note.length<60&&this.price&&this.buyUrl){this.$emit("ifAdd",1);var t={name:this.name,note:this.note,price:this.price,buyUrl:this.buyUrl,testUrl:this.testUrl,as_type:this.as_type,user_id:this.user_id};console.log("data",t);var e=this.$refs.upload.uploadFiles;console.log("fileArray",e);for(var s=new FormData,a=0;a<e.length;a++)s.append("avatar",e[a].raw);n()({url:d.a.host+"/product/addProduct",method:"post",data:s,params:t}).then(function(t){console.log(t.data)})}else this.error="*必填项为空，或者超出规定长度，请检查重新提交"}},mounted:function(){this.user_id=this.$store.getters.userinfo.id,console.log("user_id",this.user_id),this.user_id||(this.user_id=localStorage.getItem("user-xbapp"))}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal-mask"}),t._v(" "),s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"content-text"},[s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("保险名称：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{maxlength:"20",placeholder:"【必填】不超过20个字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("描述：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"input",attrs:{maxlength:"60",placeholder:"【必填】不超过58个字"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("最低价格：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"input",attrs:{placeholder:"【必填】只可填写数字，两位小数"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("保险链接：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.buyUrl,expression:"buyUrl"}],staticClass:"input",attrs:{placeholder:"【必填】"},domProps:{value:t.buyUrl},on:{input:function(e){e.target.composing||(t.buyUrl=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("测评链接：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.testUrl,expression:"testUrl"}],staticClass:"input",attrs:{placeholder:"【选填】"},domProps:{value:t.testUrl},on:{input:function(e){e.target.composing||(t.testUrl=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("保险类型：")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.as_type_name,expression:"as_type_name"}],staticClass:"input",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.as_type_name=e.target.multiple?s:s[0]},function(e){return t.changeType(e)}]}},t._l(t.ins_types,function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])}),0)]),t._v(" "),s("div",{staticClass:"imgType"}),t._v(" "),s("label",{staticClass:"label",attrs:{class:"label"}},[t._v("图片：")]),t._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"file-list":t.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),s("div",{staticClass:"error"},[t._v(" "+t._s(t.error))])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"btnCancel",on:{click:t.Cancel}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btnConfirm",on:{click:t.submitUpload}},[t._v("保存")])])])])},staticRenderFns:[]};var v=s("VU/8")(u,p,!1,function(t){s("BugC")},"data-v-6fe59980",null).exports,m={props:["product"],data:function(){return{name:"",note:"",price:"",buyUrl:"",testUrl:"",fileList:[],error:""}},methods:{Cancel:function(){this.$emit("ifEdit",0)},submitUpload:function(){if(this.name&&this.name.length<20&&this.note&&this.note.length<60&&this.price&&this.buyUrl){this.$emit("ifEdit",1);var t={id:this.product.id,name:this.name,note:this.note,price:this.price,buyUrl:this.buyUrl,testUrl:this.testUrl};console.log("data",t);var e=this.$refs.upload.uploadFiles;if(e.length>0){for(var s=new FormData,a=0;a<e.length;a++)s.append("avatar",e[a].raw);n()({url:d.a.host+"/product/editProductFile",method:"post",data:s,params:t}).then(function(t){console.log(t.data)})}else 0==e.length&&n()({url:d.a.host+"/product/editProduct",method:"post",data:t}).then(function(t){console.log(t.data)})}else this.error="*必填项为空，或者超出规定长度，请检查重新提交"}},watch:{product:function(){this.name=this.product.name,this.note=this.product.note,this.price=this.product.price,this.buyUrl=this.product.buyUrl,this.testUrl=this.product.testUrl}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal-mask"}),t._v(" "),s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"content-text"},[s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("保险名称：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{maxlength:"20",placeholder:"【必填】不超过20个字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("描述：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"input",attrs:{maxlength:"60",placeholder:"【必填】不超过58个字"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("最低价格：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"input",attrs:{placeholder:"【必填】只可填写数字，两位小数"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("保险链接：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.buyUrl,expression:"buyUrl"}],staticClass:"input",attrs:{placeholder:"【必填】"},domProps:{value:t.buyUrl},on:{input:function(e){e.target.composing||(t.buyUrl=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"row"},[s("label",{staticClass:"label"},[t._v("测评链接：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.testUrl,expression:"testUrl"}],staticClass:"input",attrs:{placeholder:"【选填】"},domProps:{value:t.testUrl},on:{input:function(e){e.target.composing||(t.testUrl=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"imgType"}),t._v(" "),s("label",{staticClass:"label",attrs:{class:"label"}},[t._v("修改图片：")]),t._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"file-list":t.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("重新上传")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),s("div",{staticClass:"error"},[t._v(" "+t._s(t.error))])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"btnCancel",on:{click:t.Cancel}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btnConfirm",on:{click:t.submitUpload}},[t._v("保存")])])])])},staticRenderFns:[]};var h=s("VU/8")(m,_,!1,function(t){s("aJgs")},"data-v-78948022",null).exports,f={components:{showModel:c.a,addProduct:v,editProduct:h},data:function(){return{products:[],ifshowModel:!1,ifaddProduct:!1,ifeditProduct:!1,product_id:"",index:"",product:{},user_id:0}},methods:{getHomeData:function(){var t={user_id:this.user_id};n.a.get(d.a.host+"/product/getAllProduct",{params:t}).then(this._getHomeData)},_getHomeData:function(t){this.products=t.data.products,console.log("res",this.products)},confirmWindow:function(t,e){console.log("product_id",e),this.index=t,this.product_id=e,this.ifshowModel=!0},ifShow:function(t){var e=this;return l()(i.a.mark(function s(){var a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("ifshowModel",t),e.ifshowModel=!1,1!=t){s.next=8;break}return s.next=5,n.a.post(d.a.host+"/product/deleteProduct",{product_id:e.product_id});case 5:a=s.sent,console.log("res",a),0==a.data.code&&e.products.splice(e.index,1);case 8:case"end":return s.stop()}},s,e)}))()},addProduct:function(){this.ifaddProduct=!0},editProduct:function(t){this.product=t,console.log("this.product",this.product),this.ifeditProduct=!0},ifAdd:function(t){this.ifaddProduct=!1,1==t&&window.location.reload()},ifEdit:function(t){this.ifeditProduct=!1,1==t&&window.location.reload()}},mounted:function(){this.user_id=this.$store.getters.userinfo.id,console.log("user_id",this.user_id),this.user_id||(this.user_id=localStorage.getItem("user-xbapp")),this.getHomeData()}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[s("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[s("el-menu",{attrs:{"default-openeds":["1","3"]}},[s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-message"}),t._v("配置")]),t._v(" "),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"1-1"}},[t._v("保险配置")]),t._v(" "),s("router-link",{attrs:{tag:"div",to:"/types"}},[s("el-menu-item",{attrs:{index:"1-2"}},[t._v("编辑标签")])],1)],1)],2),t._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-menu"}),t._v("账户管理")]),t._v(" "),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"2-1"}},[t._v("头部图片")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[t._v("图标配置")]),t._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[t._v("标签配置")])],1)],2)],1)],1),t._v(" "),s("el-container",[s("el-header",{staticStyle:{"text-align":"right","font-size":"18px"}},[s("span",[t._v("力哥理财")])]),t._v(" "),s("el-main",[s("div",{staticClass:"add",on:{click:t.addProduct}},[t._v("\n          添加保险\n        ")]),t._v(" "),s("el-table",{attrs:{data:t.products}},[s("img",{attrs:{src:t.products.imgUrl}}),t._v(" "),s("el-table-column",{attrs:{prop:"imgUrl",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{attrs:{src:t.row.imgUrl,width:"70",height:"70"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"保险名称",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"note",label:"描述",width:"260"}}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"最低价格",width:"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"buyUrl",label:"购买链接",width:"240"}}),t._v(" "),s("el-table-column",{attrs:{prop:"testUrl",label:"测评链接",width:"210"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"delete",on:{click:function(s){return t.editProduct(e.row)}}},[t._v("编辑\n              ")]),t._v(" "),s("button",{staticClass:"delete",on:{click:function(s){return t.confirmWindow(e.$index,e.row.id)}}},[t._v("删除\n              ")])]}}])})],1)],1)],1)],1),t._v(" "),s("showModel",{directives:[{name:"show",rawName:"v-show",value:t.ifshowModel,expression:"ifshowModel"}],attrs:{text:"确定要删除吗？"},on:{ifShow:t.ifShow}}),t._v(" "),s("addProduct",{directives:[{name:"show",rawName:"v-show",value:t.ifaddProduct,expression:"ifaddProduct"}],on:{ifAdd:t.ifAdd}}),t._v(" "),s("editProduct",{directives:[{name:"show",rawName:"v-show",value:t.ifeditProduct,expression:"ifeditProduct"}],attrs:{product:t.product},on:{ifEdit:t.ifEdit}})],1)},staticRenderFns:[]};var b=s("VU/8")(f,g,!1,function(t){s("H9e0")},null,null);e.default=b.exports},ybdy:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal-mask"}),t._v(" "),s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"content-text"},[s("p",[t._v(t._s(t.text))])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"btnCancel",on:{click:t.tapCancel}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"btnConfirm",on:{click:t.confirm}},[t._v("确定")])])])])},staticRenderFns:[]};var i=s("VU/8")({props:["text"],methods:{tapCancel:function(){this.$emit("ifShow",0)},confirm:function(){this.$emit("ifShow",1)}}},a,!1,function(t){s("I1a8")},"data-v-01dc6472",null);e.a=i.exports}});